Writing more function on nested loops. What do you think?
